{
    "metrics": {
        "append_dimensions":{
            "AutoScalingGroupName":"${!aws:AutoScalingGroupName}",
            "ImageId":"${!aws:ImageId}",
            "InstanceId":"${!aws:InstanceId}",
            "InstanceType":"${!aws:InstanceType}"
        },
        "metrics_collected": {
            "mem": {
                "measurement": [
                    "mem_used",
                    "mem_used_percent",
                    "mem_cached",
                    "mem_total"
                ],
                "metrics_collection_interval": 10
            },
            "cpu": {
                "resources": [
                    "*"
                ],
                "measurement": [
                    {"name": "cpu_usage_idle", "rename": "CPU_USAGE_IDLE", "unit": "Percent"},
                    {"name": "cpu_usage_nice", "unit": "Percent"},
                    "cpu_usage_guest"
                ],
                "totalcpu": false,
                "metrics_collection_interval": 10
            },
            "disk": {
                "resources": [
                    "/"
                ],
                "measurement": [
                    {"name": "free", "rename": "DISK_FREE", "unit": "Gigabytes"},
                    "total",
                    "used"
                ],
                "ignore_file_system_types": [
                    "sysfs", "devtmpfs"
                ],
                "metrics_collection_interval": 60
            },
            "diskio": {
                "resources": [
                    "*"
                ],
                "measurement": [
                    "reads",
                    "writes",
                    "read_time",
                    "write_time",
                    "io_time"
                ],
                "metrics_collection_interval": 60
            },
            "swap": {
                "measurement": [
                    "swap_used",
                    "swap_free",
                    "swap_used_percent"
                ]
            },
            "net": {
                "resources": [
                    "eth0"
                ],
                "measurement": [
                    "bytes_sent",
                    "bytes_recv",
                    "drop_in",
                    "drop_out"
                ]
            },
            "netstat": {
                "measurement": [
                    "tcp_established",
                    "tcp_syn_sent",
                    "tcp_close"
                ],
                "metrics_collection_interval": 60
            },
            "processes": {
                "measurement": [
                    "running",
                    "sleeping",
                    "dead"
                ]
            }
        }
    },
    "logs": {
        "logs_collected": {
            "files": {
                "collect_list": [
                    {
                        "file_path": "/opt/aws/amazon-cloudwatch-agent/logs/amazon-cloudwatch-agent.log",
                        "log_group_name": "/ec2/SublimePlatform/CloudWatchAgentLog",
                        "log_stream_name": "{instance_id}_{hostname}",
                        "timezone": "Local"
                    },
                    {
                        "file_path": "/var/lib/docker/containers/**.log",
                        "log_group_name":  "/ec2/SublimePlatform/DockerContainerLogs",
                        "log_stream_name": "{instance_id}_{hostname}",
                        "timezone": "Local"
                    }
                ]
            }
        },
        "log_stream_name": "/ec2/catchall"
    }
}
